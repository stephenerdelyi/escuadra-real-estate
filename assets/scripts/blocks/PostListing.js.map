{"mappings":"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","sources":["build/scripts/helpers/GetData.js","build/scripts/blocks/PostListing.js"],"sourcesContent":["export default class GetData {\n    constructor(args) {\n        this.args = args;\n\n        this.showLoader();\n        this.disableButton();\n\n        if(!this.args.ajax_overrides) {\n            this.args.ajax_overrides = {};\n        }\n\n        jQuery.ajax({\n            url: window.theme.variables.rest_url + window.theme.variables.rest_namespace + '/' + this.args.endpoint,\n            data: { query_args: this.args.query_args },\n            success: (response) => {\n                this.reset();\n\n                if(response.status == 'success') {\n                    this.args.callback(response.data);\n                } else {\n                    console.warn('Error from server while retrieving data.');\n                    this.args.callback(null);\n                }\n            },\n            error: (response) => {\n                this.reset();\n\n                console.warn('There was a general error trying to retrieve the results');\n                this.args.callback(null);\n            },\n            ...this.args.ajax_overrides\n        });\n    }\n\n    reset() {\n        this.hideLoader();\n        this.enableButton();\n    }\n\n    disableButton() {\n        if(this.args.button) {\n            this.args.button.style.opacity = 0.5;\n            this.args.button.style.pointerEvents = 'none';\n        }\n    }\n\n    enableButton() {\n        if(this.args.button) {\n            this.args.button.style.opacity = 1;\n            this.args.button.style.pointerEvents = 'all';\n        }\n    }\n\n    showLoader() {\n        if(this.args.loading) {\n            this.args.loading.classList.remove('--loading');\n        }\n    }\n\n    hideLoader() {\n        if(this.args.loading) {\n            this.args.loading.classList.add('--loading');\n        }\n    }\n}\n","import GetData from '../helpers/GetData';\n\nclass PostListing {\n    constructor(root) {\n        this.root = root;\n\n        this.item_container = root.querySelector('.js-post-listing-results');\n        this.load_button = root.querySelector('.js-post-listing-more');\n        this.offset = this.item_container.children.length;\n\n        this.load_button.addEventListener('click', (e) => {\n            e.preventDefault();\n            this.getMoreItems();\n        });\n\n        console.log(this.offset);\n    }\n\n    getMoreItems() {\n        this.data = new GetData({\n            endpoint: 'get-posts/' + this.offset,\n            callback: (data) => {\n                data.results?.forEach((post) => {\n                    this.item_container.insertAdjacentHTML('beforeend', this.makePostItem(post));\n                });\n\n                if(data.num_results == this.item_container.children.length) {\n                    this.load_button.parentElement.remove();\n                }\n\n                this.offset = this.item_container.children.length;\n                console.log(this.offset);\n            }\n        });\n    }\n\n    makePostItem(post) {\n        return `\n            <a class=\"block-post-listing__post-item\" href=\"${post.url}\">\n                <div class=\"block-post-listing__image\">\n                    <img class=\"block-post-listing__image__img\" src=\"${post.image.url}\" alt=\"${post.title}\"/>\n                </div>\n                <div class=\"block-post-listing__info\">\n                    <h2 class=\"block-post-listing__title\">${post.title}</h2>\n                    ${this.makePostItemExcerpt(post)}\n                    ${this.makePostItemMeta(post)}\n                </div>\n            </a>\n        `;\n    }\n\n    makePostItemExcerpt(post) {\n        let result = '';\n\n        if(post.excerpt) {\n            result = `<p class=\"block-post-listing__text\">${post.excerpt}</p>`;\n        }\n\n        return result;\n    }\n\n    makePostItemMeta(post) {\n        let result = '';\n\n        if(post.linked_agent) {\n            result = `<p class=\"block-post-listing__text --meta\">Posted ${post.post_date} by ${post.linked_agent.name}</p>`;\n        } else {\n            result = `<p class=\"block-post-listing__text --meta\">Posted ${post.post_date}</p>`;\n        }\n\n        return result;\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    var post_listing = document.querySelector('.js-post-listing');\n\n    if(post_listing) {\n        new PostListing(post_listing);\n    }\n});\n"],"names":[],"version":3,"file":"PostListing.js.map"}